#!/usr/local/bin/perl 

#Script to dump out status tables for ncbi and ebi to 
#pick up. 
#
#Steven Jones, 1996, Sanger Centre. 

require glob('~sjj/scripts/sanger.pl');

	$exec=&tace;
	$ftp=&tilda(ftp);
	$ENV{'ACEDB'}="/nfs/disk100/wormpub/acedb/ace4/cam";    
	@chromosomes=(I,II,III,IV,V,X);

	foreach $chrome (@chromosomes) {
	$command=<<EOF;
	Table-Maker -f wquery/ncbi.$chrome.def 
	quit
EOF
	open(textace, "echo '$command' | $exec  |");
	#open(tmp,">$ftp/pub/databases/C.elegans_sequences/STATUS_TABLES/$chrome.table");
	open(tmp,">/tmp/status$$");
	while (<textace>) {

	    if (/"/) {
                      s/^acedb>\s+//;
		      s/"//g;
		      /(\S+)\s+(\S+)\s+(\S+)(.+)/;
		      print tmp "$3\t$2\t$1$4\n";
	            }
	    }
        close textace; 
        close tmp;
	unlink "$ftp/pub/databases/C.elegans_sequences/STATUS_TABLES/$chrome.table";
        system("sort -n /tmp/status$$ > $ftp/pub/databases/C.elegans_sequences/STATUS_TABLES/$chrome.table");
}

unlink "/tmp/status$$";
